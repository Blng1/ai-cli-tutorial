<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>07 进阶实战 - AI CLI 工具分享</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&family=DM+Serif+Display&display=swap');

  :root {
    --bg: #060a12;
    --bg-raised: #0b1120;
    --bg-card: #0f1628;
    --bg-card-alt: #0a0f1e;
    --border: #192240;
    --border-focus: #2a4080;
    --blue: #4a9eff;
    --cyan: #22d3ee;
    --purple: #a78bfa;
    --green: #34d399;
    --orange: #fbbf24;
    --red: #f87171;
    --pink: #f472b6;
    --teal: #2dd4bf;
    --text: #dce4f0;
    --text2: #8295b5;
    --text3: #4a5f80;
  }

  /* ===== Reset ===== */
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Noto Sans SC', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.75;
    padding-left: 240px;
  }

  /* ===== Hero ===== */
  .hero {
    text-align: center;
    padding: 80px 32px 56px;
    border-bottom: 1px solid var(--border);
    position: relative;
    overflow: hidden;
  }

  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 50% 40% at 30% 10%, rgba(74,158,255,0.06) 0%, transparent 70%),
      radial-gradient(ellipse 40% 50% at 70% 90%, rgba(167,139,250,0.04) 0%, transparent 70%);
  }

  .hero-tag {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--cyan);
    background: rgba(34,211,238,0.08);
    border: 1px solid rgba(34,211,238,0.2);
    padding: 5px 16px;
    border-radius: 30px;
    margin-bottom: 20px;
    position: relative;
  }

  .hero h1 {
    font-family: 'DM Serif Display', serif;
    font-size: 2.8rem;
    position: relative;
    background: linear-gradient(135deg, #dce4f0 20%, #4a9eff 50%, #a78bfa 80%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 14px;
  }

  .hero p {
    font-size: 0.95rem;
    color: var(--text2);
    position: relative;
    max-width: 720px;
    margin: 0 auto;
    line-height: 1.8;
  }

  /* ===== Container / Section ===== */
  .container { max-width: 1340px; margin: 0 auto; padding: 48px 28px; }
  .section { margin-bottom: 64px; }

  .section-head {
    display: flex;
    align-items: baseline;
    gap: 14px;
    margin-bottom: 10px;
  }

  .sn {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    font-weight: 600;
    color: var(--cyan);
    background: rgba(34,211,238,0.08);
    border: 1px solid rgba(34,211,238,0.2);
    padding: 3px 10px;
    border-radius: 5px;
  }

  .st { font-size: 1.5rem; font-weight: 700; }

  .sd {
    color: var(--text2);
    font-size: 0.88rem;
    margin-bottom: 26px;
    max-width: 940px;
    border-left: 3px solid var(--border);
    padding-left: 16px;
  }

  /* ===== Card ===== */
  .card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 14px;
    overflow: hidden;
    margin-bottom: 24px;
    transition: border-color 0.3s;
  }

  .card:hover { border-color: var(--border-focus); }

  .card-head {
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
    background: var(--bg-card-alt);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .card-head h3 { font-size: 1rem; font-weight: 600; }

  .card-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    padding: 3px 10px;
    border-radius: 4px;
    background: rgba(74,158,255,0.1);
    color: var(--blue);
    border: 1px solid rgba(74,158,255,0.2);
  }

  .card-body { padding: 24px; }

  .card-note {
    font-size: 0.8rem;
    color: var(--text3);
    margin-bottom: 18px;
    font-style: italic;
  }

  /* ===== Compare Table ===== */
  .compare-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.82rem;
  }

  .compare-table thead th {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text2);
    background: var(--bg-card-alt);
    padding: 14px 16px;
    text-align: left;
    border-bottom: 2px solid var(--border);
    white-space: nowrap;
  }

  .compare-table thead th:first-child { border-radius: 8px 0 0 0; }
  .compare-table thead th:last-child { border-radius: 0 8px 0 0; }

  .compare-table tbody td {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(25,34,64,0.5);
    color: var(--text2);
    vertical-align: top;
  }

  .compare-table tbody td:first-child {
    font-weight: 600;
    color: var(--text);
    white-space: nowrap;
  }

  .compare-table tbody tr:hover td { background: rgba(74,158,255,0.03); }
  .compare-table tbody tr:last-child td { border-bottom: none; }

  .compare-table .dim { color: var(--text3); font-weight: 400; }
  .compare-table .highlight { color: var(--green); font-weight: 500; }
  .compare-table .warn { color: var(--orange); font-weight: 500; }

  /* ===== Insight ===== */
  .insight {
    background: linear-gradient(135deg, rgba(74,158,255,0.05), rgba(167,139,250,0.05));
    border: 1px solid rgba(74,158,255,0.18);
    border-radius: 12px;
    padding: 22px 26px;
    margin: 24px 0;
  }

  .insight h4 {
    font-size: 0.88rem;
    font-weight: 700;
    color: var(--blue);
    margin-bottom: 8px;
  }

  .insight p {
    font-size: 0.84rem;
    color: var(--text2);
    line-height: 1.7;
  }

  /* ===== Op Grid ===== */
  .op-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
  }

  .op-card {
    background: var(--bg-card-alt);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 20px;
    transition: border-color 0.3s;
    position: relative;
    overflow: hidden;
  }

  .op-card:hover { border-color: var(--border-focus); }

  .op-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
  }

  .op-card.cat-blue::before { background: linear-gradient(90deg, var(--blue), rgba(74,158,255,0.2)); }
  .op-card.cat-purple::before { background: linear-gradient(90deg, var(--purple), rgba(167,139,250,0.2)); }
  .op-card.cat-green::before { background: linear-gradient(90deg, var(--green), rgba(52,211,153,0.2)); }
  .op-card.cat-orange::before { background: linear-gradient(90deg, var(--orange), rgba(251,191,36,0.2)); }
  .op-card.cat-cyan::before { background: linear-gradient(90deg, var(--cyan), rgba(34,211,238,0.2)); }
  .op-card.cat-pink::before { background: linear-gradient(90deg, var(--pink), rgba(244,114,182,0.2)); }

  .op-card h4 {
    font-size: 0.88rem;
    font-weight: 600;
    margin-bottom: 12px;
    color: var(--text);
  }

  .op-card p {
    font-size: 0.8rem;
    color: var(--text2);
    line-height: 1.6;
  }

  /* ===== Op List ===== */
  .op-list {
    list-style: none;
    padding: 0;
  }

  .op-list li {
    padding: 10px 0;
    border-bottom: 1px solid rgba(25,34,64,0.4);
    font-size: 0.82rem;
    color: var(--text2);
    display: flex;
    align-items: flex-start;
    gap: 10px;
  }

  .op-list li:last-child { border-bottom: none; }

  .op-name {
    font-weight: 600;
    color: var(--text);
  }

  .op-desc {
    color: var(--text2);
    font-size: 0.78rem;
  }

  .freq-high {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--green);
    background: rgba(52,211,153,0.08);
    border: 1px solid rgba(52,211,153,0.2);
    padding: 1px 6px;
    border-radius: 3px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .freq-mid {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--blue);
    background: rgba(74,158,255,0.08);
    border: 1px solid rgba(74,158,255,0.2);
    padding: 1px 6px;
    border-radius: 3px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .freq-low {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    color: var(--text3);
    background: rgba(74,95,128,0.08);
    border: 1px solid rgba(74,95,128,0.2);
    padding: 1px 6px;
    border-radius: 3px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  /* ===== Spec Block ===== */
  .spec-block {
    background: #080c18;
    border: 1px solid rgba(25,34,64,0.8);
    border-radius: 10px;
    overflow: hidden;
    margin: 16px 0;
  }

  .spec-block-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 18px;
    background: rgba(15,22,40,0.8);
    border-bottom: 1px solid rgba(25,34,64,0.6);
  }

  .spec-block-head span {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--text3);
  }

  .spec-block-head .spec-lang {
    color: var(--cyan);
    background: rgba(34,211,238,0.08);
    border: 1px solid rgba(34,211,238,0.15);
    padding: 2px 8px;
    border-radius: 3px;
  }

  .spec-block pre {
    padding: 18px 20px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem;
    line-height: 1.7;
    color: var(--text2);
    overflow-x: auto;
    white-space: pre;
  }

  .spec-block pre .key { color: var(--blue); font-weight: 600; }
  .spec-block pre .str { color: var(--orange); }
  .spec-block pre .num { color: var(--cyan); }
  .spec-block pre .comment { color: var(--text3); }
  .spec-block pre .keyword { color: var(--purple); }
  .spec-block pre .value { color: var(--green); }

  /* ===== Mermaid ===== */
  .mermaid {
    display: flex;
    justify-content: center;
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    padding: 24px 16px;
    overflow-x: auto;
    border: 1px solid rgba(25,34,64,0.6);
  }

  .mermaid svg { max-width: 100%; height: auto; }

  /* ===== Bottom Nav ===== */
  .bottom-nav {
    display: flex;
    justify-content: center;
    margin-top: 48px;
  }

  .bottom-nav-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 24px 40px;
    text-decoration: none;
    color: inherit;
    display: block;
    transition: all 0.3s;
    text-align: center;
  }

  .bottom-nav-card:hover {
    border-color: var(--border-focus);
    transform: translateY(-2px);
    box-shadow: 0 8px 32px rgba(74,158,255,0.08);
  }

  .bottom-nav-card .nav-dir {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--text3);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 8px;
  }

  .bottom-nav-card h4 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text);
  }

  .bottom-nav-card p {
    font-size: 0.78rem;
    color: var(--text2);
    margin-top: 4px;
  }

  /* ===== Footer ===== */
  .footer {
    text-align: center;
    padding: 36px;
    border-top: 1px solid var(--border);
    color: var(--text3);
    font-size: 0.72rem;
    font-family: 'JetBrains Mono', monospace;
  }

  .footer a {
    color: var(--text3);
    text-decoration: none;
    transition: color 0.3s;
  }

  .footer a:hover { color: var(--blue); }

  /* ===== Repo Showcase ===== */
  .repo-showcase {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 24px;
  }

  .repo-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 14px;
    overflow: hidden;
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .repo-card:hover {
    border-color: var(--border-focus);
    box-shadow: 0 4px 24px rgba(74,158,255,0.06);
  }

  .repo-card-top {
    padding: 24px 24px 16px;
    border-bottom: 1px solid var(--border);
    position: relative;
  }

  .repo-card-top::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
  }

  .repo-card.theme-cyan .repo-card-top::before {
    background: linear-gradient(90deg, var(--cyan), rgba(34,211,238,0.2));
  }

  .repo-card.theme-green .repo-card-top::before {
    background: linear-gradient(90deg, var(--green), rgba(52,211,153,0.2));
  }

  .repo-name {
    font-size: 0.95rem;
    font-weight: 700;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .repo-name a {
    color: var(--text);
    text-decoration: none;
    transition: color 0.2s;
  }

  .repo-name a:hover { color: var(--cyan); }

  .repo-desc {
    font-size: 0.78rem;
    color: var(--text2);
    line-height: 1.6;
    margin-bottom: 14px;
  }

  .repo-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .repo-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    padding: 3px 10px;
    border-radius: 4px;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    white-space: nowrap;
  }

  .repo-badge.stars {
    color: var(--orange);
    background: rgba(251,191,36,0.08);
    border: 1px solid rgba(251,191,36,0.2);
  }

  .repo-badge.forks {
    color: var(--blue);
    background: rgba(74,158,255,0.08);
    border: 1px solid rgba(74,158,255,0.2);
  }

  .repo-badge.version {
    color: var(--green);
    background: rgba(52,211,153,0.08);
    border: 1px solid rgba(52,211,153,0.2);
  }

  .repo-badge.lang {
    color: var(--purple);
    background: rgba(167,139,250,0.08);
    border: 1px solid rgba(167,139,250,0.2);
  }

  .repo-badge.contribs {
    color: var(--teal);
    background: rgba(45,212,191,0.08);
    border: 1px solid rgba(45,212,191,0.2);
  }

  .repo-card-body { padding: 20px 24px; }

  .repo-agents {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 16px;
  }

  .agent-chip {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem;
    padding: 3px 10px;
    border-radius: 20px;
    background: rgba(74,158,255,0.06);
    border: 1px solid rgba(74,158,255,0.15);
    color: var(--text2);
  }

  .agent-chip.primary {
    background: rgba(34,211,238,0.08);
    border-color: rgba(34,211,238,0.25);
    color: var(--cyan);
  }

  .repo-features {
    list-style: none;
    padding: 0;
  }

  .repo-features li {
    padding: 8px 0;
    border-bottom: 1px solid rgba(25,34,64,0.3);
    font-size: 0.78rem;
    color: var(--text2);
    display: flex;
    align-items: flex-start;
    gap: 8px;
    line-height: 1.5;
  }

  .repo-features li:last-child { border-bottom: none; }

  .feat-label {
    font-weight: 600;
    color: var(--text);
    white-space: nowrap;
    min-width: 64px;
  }

  .vs-banner {
    text-align: center;
    padding: 16px;
    margin: 8px 0 24px;
  }

  .vs-banner-inner {
    display: inline-flex;
    align-items: center;
    gap: 14px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--text3);
  }

  .vs-banner-inner::before,
  .vs-banner-inner::after {
    content: '';
    width: 60px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border), transparent);
  }

  .quick-diff {
    display: grid;
    grid-template-columns: 160px 1fr 1fr;
    gap: 0;
    font-size: 0.78rem;
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 20px;
  }

  .quick-diff-header {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text2);
    background: var(--bg-card-alt);
    padding: 12px 16px;
    border-bottom: 2px solid var(--border);
  }

  .quick-diff-cell {
    padding: 10px 16px;
    border-bottom: 1px solid rgba(25,34,64,0.4);
    color: var(--text2);
    line-height: 1.5;
  }

  .quick-diff-cell:nth-child(3n+1) {
    font-weight: 600;
    color: var(--text);
    background: rgba(15,22,40,0.3);
  }

  .quick-diff-cell:nth-last-child(-n+3) { border-bottom: none; }

  .quick-diff-cell code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    padding: 1px 5px;
    border-radius: 3px;
    background: rgba(74,158,255,0.06);
    color: var(--cyan);
  }

  /* ===== Pricing Grid ===== */
  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    margin: 16px 0;
  }

  .pricing-card {
    background: var(--bg-card-alt);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 16px;
    text-align: center;
    transition: border-color 0.3s;
  }

  .pricing-card:hover { border-color: var(--border-focus); }

  .pricing-card .model-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 10px;
  }

  .pricing-card .price-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.72rem;
    padding: 4px 0;
    border-bottom: 1px solid rgba(25,34,64,0.4);
  }

  .pricing-card .price-row:last-child { border-bottom: none; }

  .pricing-card .price-label { color: var(--text3); }
  .pricing-card .price-value { color: var(--cyan); font-family: 'JetBrains Mono', monospace; font-weight: 500; }

  .pricing-card .model-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.58rem;
    padding: 2px 8px;
    border-radius: 3px;
    margin-top: 10px;
    display: inline-block;
  }

  .pricing-card .model-tag.tag-budget { color: var(--green); background: rgba(52,211,153,0.08); border: 1px solid rgba(52,211,153,0.2); }
  .pricing-card .model-tag.tag-balanced { color: var(--blue); background: rgba(74,158,255,0.08); border: 1px solid rgba(74,158,255,0.2); }
  .pricing-card .model-tag.tag-premium { color: var(--purple); background: rgba(167,139,250,0.08); border: 1px solid rgba(167,139,250,0.2); }
  .pricing-card .model-tag.tag-free { color: var(--orange); background: rgba(251,191,36,0.08); border: 1px solid rgba(251,191,36,0.2); }

  /* ===== Cost Formula ===== */
  .cost-formula {
    background: linear-gradient(135deg, rgba(74,158,255,0.06), rgba(34,211,238,0.04));
    border: 1px solid rgba(74,158,255,0.2);
    border-radius: 12px;
    padding: 20px 24px;
    text-align: center;
    margin-bottom: 20px;
    font-family: 'JetBrains Mono', monospace;
  }

  .cost-formula .formula {
    font-size: 0.92rem;
    color: var(--text);
    font-weight: 600;
    margin-bottom: 6px;
  }

  .cost-formula .formula-note {
    font-size: 0.72rem;
    color: var(--text2);
  }

  .cost-formula .formula .hl-input { color: var(--cyan); }
  .cost-formula .formula .hl-output { color: var(--orange); }
  .cost-formula .formula .hl-op { color: var(--text3); }

  /* ===== Cost Tier / Pyramid ===== */
  .cost-pyramid {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    margin: 20px 0;
  }

  .pyramid-tier {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 12px 20px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--bg-card-alt);
    transition: border-color 0.3s;
    width: 100%;
  }

  .pyramid-tier:hover { border-color: var(--border-focus); }

  .pyramid-tier .tier-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    font-weight: 700;
    min-width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .pyramid-tier .tier-name {
    font-weight: 600;
    font-size: 0.84rem;
    color: var(--text);
    min-width: 130px;
  }

  .pyramid-tier .tier-desc {
    font-size: 0.76rem;
    color: var(--text2);
    flex: 1;
  }

  .pyramid-tier .tier-save {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    font-weight: 600;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .tier-green .tier-num { color: var(--green); background: rgba(52,211,153,0.1); border: 1px solid rgba(52,211,153,0.25); }
  .tier-green .tier-save { color: var(--green); }
  .tier-blue .tier-num { color: var(--blue); background: rgba(74,158,255,0.1); border: 1px solid rgba(74,158,255,0.25); }
  .tier-blue .tier-save { color: var(--blue); }
  .tier-cyan .tier-num { color: var(--cyan); background: rgba(34,211,238,0.1); border: 1px solid rgba(34,211,238,0.25); }
  .tier-cyan .tier-save { color: var(--cyan); }
  .tier-purple .tier-num { color: var(--purple); background: rgba(167,139,250,0.1); border: 1px solid rgba(167,139,250,0.25); }
  .tier-purple .tier-save { color: var(--purple); }
  .tier-orange .tier-num { color: var(--orange); background: rgba(251,191,36,0.1); border: 1px solid rgba(251,191,36,0.25); }
  .tier-orange .tier-save { color: var(--orange); }

  /* ===== Savings Meter ===== */
  .savings-meter {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
  }

  .savings-meter .meter-bar {
    flex: 1;
    height: 6px;
    background: rgba(25,34,64,0.6);
    border-radius: 3px;
    overflow: hidden;
  }

  .savings-meter .meter-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.5s ease;
  }

  .savings-meter .meter-fill.fill-green { background: linear-gradient(90deg, var(--green), rgba(52,211,153,0.5)); }
  .savings-meter .meter-fill.fill-blue { background: linear-gradient(90deg, var(--blue), rgba(74,158,255,0.5)); }
  .savings-meter .meter-fill.fill-purple { background: linear-gradient(90deg, var(--purple), rgba(167,139,250,0.5)); }
  .savings-meter .meter-fill.fill-cyan { background: linear-gradient(90deg, var(--cyan), rgba(34,211,238,0.5)); }
  .savings-meter .meter-fill.fill-orange { background: linear-gradient(90deg, var(--orange), rgba(251,191,36,0.5)); }

  .savings-meter .meter-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    font-weight: 600;
    min-width: 42px;
    text-align: right;
  }

  /* ===== Monitor Block ===== */
  .monitor-block {
    background: #050810;
    border: 1px solid rgba(25,34,64,0.8);
    border-radius: 10px;
    overflow: hidden;
    margin: 16px 0;
  }

  .monitor-block .monitor-head {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background: rgba(15,22,40,0.8);
    border-bottom: 1px solid rgba(25,34,64,0.6);
  }

  .monitor-block .monitor-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  .monitor-block .monitor-dot.red { background: #f87171; }
  .monitor-block .monitor-dot.yellow { background: #fbbf24; }
  .monitor-block .monitor-dot.green { background: #34d399; }

  .monitor-block .monitor-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    color: var(--text3);
    margin-left: 4px;
  }

  .monitor-block pre {
    padding: 16px 20px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.74rem;
    line-height: 1.7;
    color: var(--text2);
    overflow-x: auto;
    white-space: pre;
  }

  .monitor-block pre .cmd { color: var(--green); }
  .monitor-block pre .path { color: var(--blue); }
  .monitor-block pre .val { color: var(--cyan); }
  .monitor-block pre .hl { color: var(--orange); font-weight: 600; }
  .monitor-block pre .dim { color: var(--text3); }

  /* ===== Cross-Tool Tabs ===== */
  .cross-tool-tabs {
    display: flex;
    gap: 2px;
    background: var(--bg-card-alt);
    border-radius: 8px 8px 0 0;
    border: 1px solid var(--border);
    border-bottom: none;
    overflow-x: auto;
  }

  .cross-tool-tab {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    padding: 10px 16px;
    color: var(--text3);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
    white-space: nowrap;
    background: none;
    border-top: none;
    border-left: none;
    border-right: none;
  }

  .cross-tool-tab:hover { color: var(--text2); }
  .cross-tool-tab.active { color: var(--cyan); border-bottom-color: var(--cyan); background: rgba(34,211,238,0.04); }

  .cross-tool-panels {
    border: 1px solid var(--border);
    border-radius: 0 0 8px 8px;
    overflow: hidden;
  }

  .cross-tool-panel {
    display: none;
    padding: 0;
  }

  .cross-tool-panel.active { display: block; }

  /* ===== Tip Callout ===== */
  .tip-callout {
    background: rgba(52,211,153,0.04);
    border: 1px solid rgba(52,211,153,0.15);
    border-radius: 8px;
    padding: 14px 18px;
    margin: 12px 0;
    font-size: 0.78rem;
    color: var(--text2);
    display: flex;
    gap: 10px;
    align-items: flex-start;
  }

  .tip-callout .tip-icon {
    color: var(--green);
    font-size: 0.9rem;
    flex-shrink: 0;
    margin-top: 1px;
  }

  .tip-callout.tip-warn {
    background: rgba(251,191,36,0.04);
    border-color: rgba(251,191,36,0.15);
  }

  .tip-callout.tip-warn .tip-icon { color: var(--orange); }

  /* ===== Billing Toggle ===== */
  .billing-split {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin: 16px 0;
  }

  .billing-col {
    background: var(--bg-card-alt);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 18px;
  }

  .billing-col h5 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    font-weight: 600;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }

  .billing-col h5.sub-label { color: var(--blue); }
  .billing-col h5.api-label { color: var(--green); }

  .billing-col ul {
    list-style: none;
    padding: 0;
  }

  .billing-col li {
    font-size: 0.76rem;
    color: var(--text2);
    padding: 5px 0;
    border-bottom: 1px solid rgba(25,34,64,0.3);
  }

  .billing-col li:last-child { border-bottom: none; }

  /* ===== Responsive ===== */
  @media (max-width: 768px) {
    .hero h1 { font-size: 2rem; }
    .hero { padding: 56px 20px 40px; }
    .container { padding: 32px 16px; }
    .op-grid { grid-template-columns: 1fr; }
    .compare-table { font-size: 0.72rem; }
    .compare-table thead th,
    .compare-table tbody td { padding: 10px 10px; }
    .card-body { padding: 16px; overflow-x: auto; }
    .repo-showcase { grid-template-columns: 1fr; }
    .quick-diff { grid-template-columns: 100px 1fr 1fr; font-size: 0.7rem; }
    .quick-diff-header,
    .quick-diff-cell { padding: 8px 10px; }
    .repo-card-top,
    .repo-card-body { padding: 16px; }
    .repo-stats { gap: 5px; }
    .repo-agents { gap: 4px; }
    .pricing-grid { grid-template-columns: 1fr 1fr; gap: 8px; }
    .pricing-card { padding: 12px; }
    .pricing-card .model-name { font-size: 0.72rem; }
    .cost-pyramid { gap: 4px; }
    .pyramid-tier { padding: 10px 14px; gap: 10px; flex-wrap: wrap; }
    .pyramid-tier .tier-name { min-width: auto; font-size: 0.78rem; }
    .pyramid-tier .tier-desc { min-width: 100%; order: 3; margin-top: 4px; font-size: 0.72rem; }
    .billing-split { grid-template-columns: 1fr; }
    .cross-tool-tab { padding: 8px 12px; font-size: 0.62rem; }
    .monitor-block pre { font-size: 0.68rem; padding: 12px 14px; }
  }
</style>
</head>
<body>
<script src="sidebar.js"></script>

<!-- ========== NAV ========== -->
<nav style="display:flex;justify-content:space-between;align-items:center;padding:12px 28px;border-bottom:1px solid #192240;background:#0b1120;font-family:'JetBrains Mono',monospace;font-size:0.75rem;">
  <a href="dev-standards.html" style="color:#8295b5;text-decoration:none;">&larr; 上一章</a>
  <a href="index.html" style="color:#4a5f80;text-decoration:none;">07 / 07 &middot; 返回主页</a>
  <span style="color:#4a5f80;">最终章</span>
</nav>

<!-- ========== HERO ========== -->
<div class="hero">
  <div class="hero-tag">CHAPTER 07 &middot; FINAL</div>
  <h1>进阶实战</h1>
  <p>多模型协作、自定义 MCP、成本优化、渐进式实践 &mdash;&mdash; 从理论到实战的最后一步。</p>
</div>

<div class="container">

<!-- ========== SECTION 01: 多模型协作 ========== -->
<div class="section">
  <div class="section-head">
    <span class="sn">01</span>
    <span class="st">多模型协作</span>
  </div>
  <p class="sd">不同 AI 模型各有所长。利用多工具/多模型协作，可以取长补短：一个模型负责实现，另一个负责审查。</p>

  <div class="card">
    <div class="card-head">
      <h3>模型能力对比矩阵</h3>
      <span class="card-badge">COMPARISON</span>
    </div>
    <div class="card-body">
      <div style="overflow-x:auto;">
        <table class="compare-table">
          <thead>
            <tr>
              <th>能力</th>
              <th>Claude</th>
              <th>GPT / Codex</th>
              <th>Gemini</th>
              <th>GLM</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>代码实现</td>
              <td class="highlight">最强</td>
              <td>优秀</td>
              <td>良好</td>
              <td>良好</td>
            </tr>
            <tr>
              <td>代码审查</td>
              <td>优秀</td>
              <td class="highlight">优秀</td>
              <td>良好</td>
              <td class="dim">中等</td>
            </tr>
            <tr>
              <td>长上下文</td>
              <td>200K / 1M</td>
              <td>400K / 1M</td>
              <td class="highlight">1M</td>
              <td>128K~200K</td>
            </tr>
            <tr>
              <td>前端 / UI</td>
              <td>优秀</td>
              <td>良好</td>
              <td class="highlight">优秀</td>
              <td>良好</td>
            </tr>
            <tr>
              <td>推理 / 规划</td>
              <td class="highlight">最强</td>
              <td>优秀</td>
              <td>优秀</td>
              <td>良好</td>
            </tr>
            <tr>
              <td>价格</td>
              <td class="warn">高</td>
              <td>中等</td>
              <td class="highlight">低</td>
              <td class="highlight">最低</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-head">
      <h3>通用多模型协作工作流</h3>
      <span class="card-badge">WORKFLOW</span>
    </div>
    <div class="card-body">
      <p class="card-note">先按能力拆分，再并行执行，最后交叉审查与集成验证。</p>
      <div class="mermaid">
flowchart LR
    A["需求输入"] --> B["主控 Agent 拆解与路由"]
    B --> C1["实现 Agent<br/>后端 / 业务逻辑"]
    B --> C2["体验 Agent<br/>前端 / 交互"]
    B --> C3["检索 Agent<br/>文档 / 代码证据"]
    C1 --> D["主控 Agent 汇总变更"]
    C2 --> D
    C3 --> D
    D --> E["交叉审查"]
    E --> F["回归验证与交付"]
      </div>
    </div>
  </div>

  <!-- ===== 实战参考：仓库展示 ===== -->
  <div class="card">
    <div class="card-head">
      <h3>实战参考：项目级多 Agent 运行架构</h3>
      <span class="card-badge">PRACTICE</span>
    </div>
    <div class="card-body">
      <p class="card-note">两个开源仓库代表了当前 AI CLI 多 Agent 协作的两种主流范式 &mdash;&mdash; 一个是 OpenCode 插件编排层，一个是 Claude Code 原生 Team 协作流程。</p>

      <!-- ── 双仓库展示 ── -->
      <div class="repo-showcase">

        <!-- oh-my-opencode -->
        <div class="repo-card theme-cyan">
          <div class="repo-card-top">
            <div class="repo-name">
              <a href="https://github.com/code-yeongyu/oh-my-opencode" target="_blank" rel="noopener noreferrer">oh-my-opencode</a>
            </div>
            <div class="repo-desc">OpenCode 插件编排层 &mdash;&mdash; Sisyphus 主控 Agent 驱动的多模型协作系统，提供角色分工、后台并行、断点续跑、自动验证的完整工程闭环。</div>
            <div class="repo-stats">
              <span class="repo-badge stars">30.7k stars</span>
              <span class="repo-badge forks">2.3k forks</span>
              <span class="repo-badge version">v3.5.2</span>
              <span class="repo-badge lang">TypeScript</span>
              <span class="repo-badge contribs">204 contributors</span>
            </div>
          </div>
          <div class="repo-card-body">
            <div class="repo-agents">
              <span class="agent-chip primary">Sisyphus / Atlas 主控</span>
              <span class="agent-chip primary">Prometheus 规划</span>
              <span class="agent-chip">Hephaestus 实现</span>
              <span class="agent-chip">Frontend UI/UX</span>
              <span class="agent-chip">Librarian 文档</span>
              <span class="agent-chip">Explore 检索</span>
              <span class="agent-chip">Oracle 调试</span>
            </div>
            <ul class="repo-features">
              <li><span class="feat-label">编排模式</span>主控拆解需求 &rarr; 按专业角色分发 &rarr; 后台并行执行 &rarr; 汇总验证</li>
              <li><span class="feat-label">并行机制</span>任务拆解后同时启动 Explore / Librarian / Hephaestus / Frontend 等后台子任务</li>
              <li><span class="feat-label">隔离策略</span>按角色能力 + 工具权限隔离，主控仅做路由与汇总，保持精简上下文</li>
              <li><span class="feat-label">质量门禁</span>Todo Continuation Enforcer 强制未完成任务续跑，验证失败则自动迭代</li>
              <li><span class="feat-label">状态持久</span><code>.sisyphus/boulder.json</code> + 会话状态，支持 <code>/start-work</code> 断点恢复</li>
              <li><span class="feat-label">适用场景</span>复杂多文件改造、长链路任务、需要"做到完成"的工程项目</li>
            </ul>
          </div>
        </div>

        <!-- ccg-workflow -->
        <div class="repo-card theme-green">
          <div class="repo-card-top">
            <div class="repo-name">
              <a href="https://github.com/fengshao1227/ccg-workflow" target="_blank" rel="noopener noreferrer">ccg-workflow</a>
            </div>
            <div class="repo-desc">Claude + Codex + Gemini 多模型协作系统 &mdash;&mdash; Claude 编排决策，Codex 负责后端分析/审查，Gemini 负责前端分析/审查，提供 27+ 个斜杠命令。</div>
            <div class="repo-stats">
              <span class="repo-badge stars">2.3k stars</span>
              <span class="repo-badge forks">157 forks</span>
              <span class="repo-badge version">v1.7.60</span>
              <span class="repo-badge lang">Go + TypeScript</span>
              <span class="repo-badge contribs">4 contributors</span>
            </div>
          </div>
          <div class="repo-card-body">
            <div class="repo-agents">
              <span class="agent-chip primary">Claude Lead 编排</span>
              <span class="agent-chip primary">Codex 后端分析</span>
              <span class="agent-chip primary">Gemini 前端分析</span>
              <span class="agent-chip">Builder Teammates</span>
              <span class="agent-chip">codeagent-wrapper</span>
            </div>
            <ul class="repo-features">
              <li><span class="feat-label">编排模式</span>Claude Lead 编排，固定路由 Codex（后端）+ Gemini（前端）+ Claude（决策/代码）</li>
              <li><span class="feat-label">并行机制</span>Research/Plan 双模型并行分析；Exec 阶段按 Layer 并行 spawn Builder teammates</li>
              <li><span class="feat-label">隔离策略</span>计划阶段强制文件范围不重叠；有冲突则转依赖关系并串行化</li>
              <li><span class="feat-label">质量门禁</span><code>team-review</code> 双模型交叉审查，Critical/Warning/Info 分级，Critical 清零才能交付</li>
              <li><span class="feat-label">状态持久</span><code>.claude/team-plan/*.md</code> 文件传递状态，各阶段 <code>/clear</code> 隔离上下文</li>
              <li><span class="feat-label">适用场景</span>可拆为 3+ 独立模块、多人并行交付、需要明确责任边界的项目</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- ── 核心差异速查 ── -->
      <div class="vs-banner">
        <div class="vs-banner-inner">CORE DIFFERENCES</div>
      </div>

      <div class="quick-diff">
        <div class="quick-diff-header">维度</div>
        <div class="quick-diff-header">oh-my-opencode</div>
        <div class="quick-diff-header">ccg-workflow</div>

        <div class="quick-diff-cell">设计理念</div>
        <div class="quick-diff-cell">角色专精 &mdash; 每个 Agent 有独立能力边界与工具集</div>
        <div class="quick-diff-cell">模型专精 &mdash; 按模型特长固定路由（前端/后端/编排）</div>

        <div class="quick-diff-cell">Agent 数量</div>
        <div class="quick-diff-cell">7+ 专业子 Agent（Hephaestus / Frontend / Librarian / Explore / Oracle ...）</div>
        <div class="quick-diff-cell">3 核心模型 + 按需 spawn Builder teammates</div>

        <div class="quick-diff-cell">任务持续性</div>
        <div class="quick-diff-cell"><code>boulder.json</code> 状态持久化 + Todo Enforcer 强制续跑</div>
        <div class="quick-diff-cell">文件传递状态 + <code>/clear</code> 隔离，阶段间无状态耦合</div>

        <div class="quick-diff-cell">上手成本</div>
        <div class="quick-diff-cell">配置重，编排层功能多，需建立统一约束与提示词规范</div>
        <div class="quick-diff-cell">一键安装 <code>npx ccg-workflow</code>，命令式驱动，渐进式采用</div>

        <div class="quick-diff-cell">底层平台</div>
        <div class="quick-diff-cell">OpenCode（兼容 Claude Code Skills/Hooks/MCP）</div>
        <div class="quick-diff-cell">Claude Code CLI 原生（利用 Agent Teams 实验特性）</div>

        <div class="quick-diff-cell">风险点</div>
        <div class="quick-diff-cell">OAuth 访问受限争议；编排层复杂度高</div>
        <div class="quick-diff-cell">依赖 Agent Teams 实验能力；计划质量直接影响执行</div>
      </div>

      <!-- ── 架构流程图 ── -->
      <div class="op-grid">
        <div class="op-card cat-cyan">
          <h4>oh-my-opencode 架构流程</h4>
          <div class="mermaid">
flowchart TD
    classDef ctrl fill:#0d2847,stroke:#22d3ee,stroke-width:2px,color:#22d3ee
    classDef agent fill:#0f1628,stroke:#4a9eff,color:#dce4f0
    classDef state fill:#0f1628,stroke:#fbbf24,color:#fbbf24
    classDef gate fill:#0f1628,stroke:#34d399,color:#34d399

    REQ["&#x1F4E5; 需求输入"] --> CTRL["Sisyphus / Atlas<br/>主控编排"]
    CTRL --> PLAN["Prometheus<br/>任务规划"]
    PLAN --> EXEC["&#x1F680; /start-work<br/>分发执行"]

    EXEC --> |并行| EXP["Explore<br/>代码检索"]
    EXEC --> |并行| LIB["Librarian<br/>文档检索"]
    EXEC --> |并行| HEP["Hephaestus<br/>后端实现"]
    EXEC --> |并行| FE["Frontend<br/>UI 实现"]
    EXEC --> |并行| ORA["Oracle<br/>设计/调试"]

    EXP --> MERGE["&#x1F4CB; 主控汇总变更"]
    LIB --> MERGE
    HEP --> MERGE
    FE --> MERGE
    ORA --> MERGE

    MERGE --> VERIFY{"&#x2705; 验证通过？"}
    VERIFY -- "是" --> DONE["&#x2714; 交付"]
    VERIFY -- "否" --> ENFORCE["Todo Enforcer<br/>强制续跑"]
    ENFORCE --> EXEC

    BOULDER["&#x1F4BE; boulder.json<br/>状态持久化"] -.-> EXEC
    BOULDER -.-> ENFORCE

    class CTRL,PLAN ctrl
    class EXP,LIB,HEP,FE,ORA agent
    class BOULDER state
    class VERIFY,DONE,ENFORCE gate
          </div>
          <div class="insight" style="margin-top:16px;">
            <h4>核心机制</h4>
            <p><strong>角色分工 + 后台并行 + 状态闭环</strong> &mdash;&mdash; 主控 Agent 不做具体实现，只负责拆解、分发、汇总。每个子 Agent 有独立工具权限和能力边界，后台并行执行。boulder.json 记录全局状态，Todo Continuation Enforcer 在验证未通过时强制续跑，确保任务"做到完成"。</p>
          </div>
        </div>

        <div class="op-card cat-green">
          <h4>ccg-workflow 架构流程</h4>
          <div class="mermaid">
flowchart TD
    classDef lead fill:#0d2847,stroke:#34d399,stroke-width:2px,color:#34d399
    classDef model fill:#0f1628,stroke:#a78bfa,color:#dce4f0
    classDef builder fill:#0f1628,stroke:#4a9eff,color:#4a9eff
    classDef gate fill:#0f1628,stroke:#fbbf24,color:#fbbf24
    classDef phase fill:#0d2847,stroke:#22d3ee,color:#22d3ee

    REQ["&#x1F4E5; 需求输入"] --> LEAD["Claude Lead<br/>编排决策"]

    LEAD --> RES["&#x1F50D; Phase 1: Research"]
    RES --> |并行| CODEX_R["Codex<br/>后端分析"]
    RES --> |并行| GEMINI_R["Gemini<br/>前端分析"]
    CODEX_R --> PLAN["&#x1F4D0; Phase 2: Plan"]
    GEMINI_R --> PLAN

    PLAN --> EXEC["&#x1F680; Phase 3: Exec"]
    EXEC --> |并行| B1["Builder 1<br/>Layer A"]
    EXEC --> |并行| B2["Builder 2<br/>Layer B"]
    EXEC --> |并行| BN["Builder N<br/>Layer ..."]

    B1 --> REV["&#x1F50E; Phase 4: Review"]
    B2 --> REV
    BN --> REV
    REV --> |并行| CODEX_V["Codex 审查"]
    REV --> |并行| GEMINI_V["Gemini 审查"]

    CODEX_V --> GATE{"Critical = 0 ?"}
    GEMINI_V --> GATE
    GATE -- "否" --> FIX["&#x1F527; 修复 Critical"]
    FIX --> REV
    GATE -- "是" --> DONE["&#x2714; 交付"]

    ISO["&#x1F4C1; 文件范围隔离<br/>依赖分层"] -.-> EXEC
    STATE["&#x1F4DD; team-plan/*.md<br/>状态传递"] -.-> RES
    STATE -.-> PLAN
    STATE -.-> EXEC
    STATE -.-> REV

    class LEAD lead
    class CODEX_R,GEMINI_R,CODEX_V,GEMINI_V model
    class B1,B2,BN builder
    class GATE,FIX gate
    class RES,PLAN,EXEC,REV phase
          </div>
          <div class="insight" style="margin-top:16px;">
            <h4>核心机制</h4>
            <p><strong>模型专精 + 阶段隔离 + 交叉审查</strong> &mdash;&mdash; Claude 做编排决策和代码实现，Codex 专注后端分析/审查，Gemini 专注前端分析/审查。每个阶段通过 <code>/clear</code> 隔离上下文，用 <code>team-plan/*.md</code> 文件传递状态。Exec 阶段按文件范围隔离 spawn 多个 Builder 并行实施，Review 阶段双模型交叉审查确保质量。</p>
          </div>
        </div>
      </div>

      <!-- ── 选型建议 ── -->
      <div class="insight" style="margin-top:8px;">
        <h4>如何选择？</h4>
        <p>
          <strong>选 oh-my-opencode</strong> &mdash;&mdash; 如果你使用 OpenCode、需要长时间自主运行的 Agent、偏好角色分工式的专业化协作、项目需要断点续跑能力。<br/>
          <strong>选 ccg-workflow</strong> &mdash;&mdash; 如果你使用 Claude Code CLI、项目可按模块拆分并行、需要快速上手（<code>npx</code> 一键）、偏好阶段式 Research &rarr; Plan &rarr; Exec &rarr; Review 流程。<br/>
          两者并非互斥：oh-my-opencode 侧重"Agent 自主完成"，ccg-workflow 侧重"人机协作编排"。根据项目复杂度和团队习惯选择。
        </p>
      </div>
    </div>
  </div>
</div>

<!-- ========== SECTION 02: 自定义 MCP Server 开发 ========== -->
<div class="section">
  <div class="section-head">
    <span class="sn">02</span>
    <span class="st">自定义 MCP Server 开发</span>
  </div>
  <p class="sd">当现有 MCP Server 不满足需求时，可以自己开发。MCP 协议使用 JSON-RPC 2.0，支持 TypeScript / Python 实现。</p>

  <div class="card">
    <div class="card-head">
      <h3>最小 MCP Server 模板</h3>
      <span class="card-badge">TEMPLATE</span>
    </div>
    <div class="card-body">
      <p class="card-note">使用 @modelcontextprotocol/sdk 快速搭建自定义 MCP Server</p>
      <div class="spec-block">
        <div class="spec-block-head">
          <span>my-mcp-server/index.ts</span>
          <span class="spec-lang">TYPESCRIPT</span>
        </div>
        <pre><span class="comment">// my-mcp-server/index.ts</span>
<span class="keyword">import</span> { Server } <span class="keyword">from</span> <span class="str">"@modelcontextprotocol/sdk/server"</span>;
<span class="keyword">import</span> { StdioServerTransport } <span class="keyword">from</span> <span class="str">"@modelcontextprotocol/sdk/server/stdio"</span>;

<span class="keyword">const</span> <span class="key">server</span> = <span class="keyword">new</span> Server({
  <span class="key">name</span>: <span class="str">"my-custom-server"</span>,
  <span class="key">version</span>: <span class="str">"1.0.0"</span>
}, {
  <span class="key">capabilities</span>: { <span class="key">tools</span>: {} }
});

<span class="comment">// 定义工具</span>
server.setRequestHandler(<span class="str">"tools/list"</span>, <span class="keyword">async</span> () =&gt; ({
  <span class="key">tools</span>: [{
    <span class="key">name</span>: <span class="str">"my_tool"</span>,
    <span class="key">description</span>: <span class="str">"自定义工具描述"</span>,
    <span class="key">inputSchema</span>: {
      <span class="key">type</span>: <span class="str">"object"</span>,
      <span class="key">properties</span>: {
        <span class="key">query</span>: { <span class="key">type</span>: <span class="str">"string"</span>, <span class="key">description</span>: <span class="str">"查询参数"</span> }
      },
      <span class="key">required</span>: [<span class="str">"query"</span>]
    }
  }]
}));

<span class="comment">// 实现工具</span>
server.setRequestHandler(<span class="str">"tools/call"</span>, <span class="keyword">async</span> (request) =&gt; {
  <span class="keyword">if</span> (request.params.name === <span class="str">"my_tool"</span>) {
    <span class="keyword">const</span> { query } = request.params.arguments;
    <span class="comment">// 你的自定义逻辑</span>
    <span class="keyword">return</span> { <span class="key">content</span>: [{ <span class="key">type</span>: <span class="str">"text"</span>, <span class="key">text</span>: <span class="str">`结果: ${query}`</span> }] };
  }
});

<span class="comment">// 启动</span>
<span class="keyword">const</span> <span class="key">transport</span> = <span class="keyword">new</span> StdioServerTransport();
<span class="keyword">await</span> server.connect(transport);</pre>
      </div>
    </div>
  </div>

  <div class="op-grid">
    <div class="op-card cat-blue">
      <h4>开发步骤</h4>
      <ul class="op-list">
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">定义工具</span><br><span class="op-desc">明确工具名称、描述、输入参数</span></div>
        </li>
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">实现逻辑</span><br><span class="op-desc">处理请求并返回结果</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">本地测试</span><br><span class="op-desc">使用 MCP Inspector 调试</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">配置集成</span><br><span class="op-desc">添加到 AI 工具的 MCP 配置</span></div>
        </li>
        <li>
          <span class="freq-low">&#9733;</span>
          <div><span class="op-name">发布分享</span><br><span class="op-desc">发布到 npm，供社区使用</span></div>
        </li>
      </ul>
    </div>
    <div class="op-card cat-purple">
      <h4>常见自定义场景</h4>
      <ul class="op-list">
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">内部 API</span><br><span class="op-desc">连接公司内部系统</span></div>
        </li>
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">特定数据源</span><br><span class="op-desc">对接私有数据库或数据仓库</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">工作流自动化</span><br><span class="op-desc">自动化部署、测试、通知等</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">领域工具</span><br><span class="op-desc">行业特定的工具集成</span></div>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- ========== SECTION 03: 成本控制与 Token 优化 ========== -->
<div class="section">
  <div class="section-head">
    <span class="sn">03</span>
    <span class="st">成本控制与 Token 优化</span>
  </div>
  <p class="sd">API 按量计费时代，成本优化是可持续使用 AI 编程工具的核心技能。通过五大维度组合优化 &mdash;&mdash; 输出控制、Context 裁剪、子 Agent 隔离、模型路由、Prompt Caching &mdash;&mdash; 可实现 60-90% 的成本降幅。以下策略适用于 Claude Code / OpenCode / Cursor / Gemini CLI 等主流工具。</p>

  <!-- ── 区块 1: 成本公式 + API 定价速查 ── -->
  <div class="card">
    <div class="card-head">
      <h3>成本公式与 API 定价速查</h3>
      <span class="card-badge">PRICING</span>
    </div>
    <div class="card-body">
      <div class="cost-formula">
        <div class="formula">
          <span class="hl-op">总成本 = </span>
          <span class="hl-input">输入 Token &times; 输入单价</span>
          <span class="hl-op"> + </span>
          <span class="hl-output">输出 Token &times; 输出单价</span>
        </div>
        <div class="formula-note">输出单价通常是输入的 3~5 倍 &mdash;&mdash; 控制输出量是最高杠杆的优化手段</div>
      </div>

      <h4 style="font-size:0.84rem;margin-bottom:12px;color:var(--text);">2026 主流模型 API 定价（/1M tokens）</h4>

      <div style="overflow-x:auto;">
        <table class="compare-table">
          <thead>
            <tr>
              <th>模型</th>
              <th>输入</th>
              <th>输出</th>
              <th>Cache 读取</th>
              <th>上下文</th>
              <th>适用场景</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Claude Haiku 3.5</td>
              <td>$0.80</td>
              <td>$4</td>
              <td>$0.08</td>
              <td>200K</td>
              <td class="dim">搜索 / 格式化 / 子 Agent</td>
            </tr>
            <tr>
              <td>Claude Sonnet 4</td>
              <td>$3</td>
              <td>$15</td>
              <td>$0.30</td>
              <td>200K</td>
              <td class="dim">日常编码（性价比最优）</td>
            </tr>
            <tr>
              <td>Claude Opus 4</td>
              <td>$15</td>
              <td>$75</td>
              <td>$1.50</td>
              <td>200K</td>
              <td class="dim">架构设计 / 复杂重构</td>
            </tr>
            <tr>
              <td>GPT-4.1</td>
              <td>$2</td>
              <td>$8</td>
              <td>$0.50</td>
              <td>1M</td>
              <td class="dim">通用替代 / 长上下文</td>
            </tr>
            <tr>
              <td>GPT-4.1 mini</td>
              <td>$0.40</td>
              <td>$1.60</td>
              <td>$0.10</td>
              <td>1M</td>
              <td class="dim">高频低成本任务</td>
            </tr>
            <tr>
              <td>Gemini 2.5 Pro</td>
              <td>$1.25~2.50</td>
              <td>$10~15</td>
              <td>&mdash;</td>
              <td>1M</td>
              <td class="dim">长上下文 / 规划</td>
            </tr>
            <tr>
              <td>Gemini 2.5 Flash</td>
              <td>$0.15~0.60</td>
              <td>$0.60~3.50</td>
              <td>&mdash;</td>
              <td>1M</td>
              <td class="dim">高频低成本（有免费额度）</td>
            </tr>
            <tr style="border-top:2px solid var(--border);">
              <td>GLM-4.7</td>
              <td>$0.60</td>
              <td>$2.20</td>
              <td>$0.11</td>
              <td>200K</td>
              <td class="dim">国产旗舰 / 接入 Claude Code</td>
            </tr>
            <tr>
              <td>GLM-4.5-Air</td>
              <td>$0.20</td>
              <td>$1.10</td>
              <td>$0.03</td>
              <td>128K</td>
              <td class="dim">轻量子 Agent / 高频任务</td>
            </tr>
            <tr>
              <td>GLM-4.7-Flash</td>
              <td class="highlight" colspan="3">免费</td>
              <td>200K</td>
              <td class="dim">零成本入门（有并发限制）</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="tip-callout" style="margin-top:16px;">
        <span class="tip-icon">&#9432;</span>
        <span>定价随时变动，以各厂商官网为准。Claude 系列来自 <strong>Anthropic</strong>，GPT 来自 <strong>OpenAI</strong>，Gemini 来自 <strong>Google AI Studio</strong>，GLM 来自 <strong>Z.ai</strong>（docs.z.ai/guides/overview/pricing）。GLM-4.7-Flash 和 Gemini 2.5 Flash 均有免费额度，零成本入门首选。</span>
      </div>

      <div class="billing-split">
        <div class="billing-col">
          <h5 class="sub-label">&#9670; 订阅制（固定月费）</h5>
          <ul>
            <li>Claude Pro $20 / Max $100-200 / Team</li>
            <li>Cursor Pro $20 / Business $40</li>
            <li>GitHub Copilot $10-19</li>
            <li>GLM Coding Plan &yen;20/月起（Lite &yen;60/季 / Pro &yen;300/季 / Max &yen;600/季）</li>
            <li><strong style="color:var(--text);">优化收益</strong>：不降账单，但延长额度可用时长</li>
            <li><strong style="color:var(--text);">适合</strong>：日常开发者，预算可预测</li>
          </ul>
        </div>
        <div class="billing-col">
          <h5 class="api-label">&#9670; 按量制（API / BYOK）</h5>
          <ul>
            <li>OpenCode / aider + API Key</li>
            <li>Claude Code + API Key (BYOK)</li>
            <li>Gemini CLI 免费额度 + 超量按量</li>
            <li><strong style="color:var(--text);">优化收益</strong>：直接降低账单，立竿见影</li>
            <li><strong style="color:var(--text);">适合</strong>：重度用户 / 团队，成本弹性大</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- ── 区块 1.5: 实战省钱方案 ── -->
  <div class="card">
    <div class="card-head">
      <h3>实战省钱方案：中转站与模型替代</h3>
      <span class="card-badge">COST HACK</span>
    </div>
    <div class="card-body">
      <p class="card-note">国内开发者的三种实战降本路径 &mdash;&mdash; 中转站、国产模型替代、订阅制套餐，可组合使用</p>

      <div style="overflow-x:auto;">
        <table class="compare-table">
          <thead>
            <tr>
              <th>方案</th>
              <th>原理</th>
              <th>配置方式</th>
              <th>适合场景</th>
              <th>注意事项</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>API 中转站</td>
              <td>通过第三方中转服务代理 Anthropic 官方 API，解决网络可达性问题</td>
              <td style="font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--cyan);">ANTHROPIC_BASE_URL=中转地址<br>ANTHROPIC_AUTH_TOKEN=中转Key</td>
              <td class="dim">想保持原版 Claude 体验，网络受限</td>
              <td class="warn">选择有 SLA 保障的服务商；注意 Key 安全</td>
            </tr>
            <tr>
              <td>国产模型替代<br><span style="font-size:0.72rem;color:var(--text3);">（GLM / Kimi / 豆包）</span></td>
              <td>国产模型兼容 Anthropic API 格式，直接替换 BASE_URL 即可在 Claude Code / Gemini CLI 中使用</td>
              <td style="font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--cyan);">ANTHROPIC_BASE_URL=模型API地址<br>ANTHROPIC_AUTH_TOKEN=模型Key<br>ANTHROPIC_MODEL=glm-4.7</td>
              <td class="dim">追求低延迟、低成本、合规访问</td>
              <td class="warn">模型能力有差异；复杂任务建议搭配原版</td>
            </tr>
            <tr>
              <td>GLM Coding Plan<br><span style="font-size:0.72rem;color:var(--text3);">（订阅套餐）</span></td>
              <td>智谱推出的编码专属套餐，&yen;20/月起，在 Claude Code / Cline / OpenCode 等 20+ 工具中直接使用 GLM-4.7</td>
              <td style="font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--cyan);">ANTHROPIC_BASE_URL=bigmodel地址<br>ANTHROPIC_AUTH_TOKEN=智谱Key<br><span style="color:var(--text3);"># 自动路由 GLM-4.7</span></td>
              <td class="dim">预算有限；宣称 Claude Pro 1/7 价格、3x 用量</td>
              <td class="warn">高峰期可能限速；每 5 小时额度周期</td>
            </tr>
            <tr>
              <td>Claude Code Router<br><span style="font-size:0.72rem;color:var(--text3);">（多模型路由）</span></td>
              <td>开源工具 claude-code-router，可在 Claude Code 中按需路由到不同模型提供商</td>
              <td style="font-family:'JetBrains Mono',monospace;font-size:0.72rem;color:var(--cyan);">npm i -g claude-code-router<br>ccr activate</td>
              <td class="dim">需要灵活切换多个模型 / 提供商</td>
              <td class="warn">社区维护；需自行配置 config.json</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="insight" style="margin-top:18px;margin-bottom:0;">
        <h4>组合策略建议</h4>
        <p><strong style="color:var(--orange);">日常开发</strong>：GLM Coding Plan（&yen;20/月）覆盖日常编码，复杂架构任务切回 Claude 官方。<strong style="color:var(--cyan);">团队场景</strong>：Claude Code Router + 多 Key 轮转，Sonnet 做主力 + GLM-4.5-Air 做子 Agent。<strong style="color:var(--purple);">极致省钱</strong>：GLM-4.7-Flash（免费）+ Gemini CLI 免费额度，零成本起步。</p>
      </div>
    </div>
  </div>

  <!-- ── 区块 2: 五大优化维度 ── -->
  <div class="card">
    <div class="card-head">
      <h3>五大优化维度</h3>
      <span class="card-badge">STRATEGY</span>
    </div>
    <div class="card-body">
      <p class="card-note">按落地难度从低到高排列，优先从底层开始 &mdash;&mdash; 投入产出比最高</p>

      <div class="cost-pyramid">
        <!-- Tier 5 -->
        <div class="pyramid-tier tier-orange">
          <span class="tier-num">5</span>
          <span class="tier-name">Prompt Caching</span>
          <span class="tier-desc">系统提示词 + CLAUDE.md 保持稳定 &rarr; 自动触发缓存 &rarr; 后续请求读缓存仅 0.1x 成本</span>
          <span class="tier-save">-90%</span>
        </div>
        <!-- Tier 4 -->
        <div class="pyramid-tier tier-purple">
          <span class="tier-num">4</span>
          <span class="tier-name">模型路由级联</span>
          <span class="tier-desc">Haiku 做搜索 &rarr; Sonnet 日常编码 &rarr; Opus 仅用于架构级任务，按需升级</span>
          <span class="tier-save">-40~70%</span>
        </div>
        <!-- Tier 3 -->
        <div class="pyramid-tier tier-cyan">
          <span class="tier-num">3</span>
          <span class="tier-name">子 Agent 隔离</span>
          <span class="tier-desc">具体实现委派子 Agent，主会话保持编排角色不膨胀，每个子 Agent 天然隔离上下文</span>
          <span class="tier-save">-30~60%</span>
        </div>
        <!-- Tier 2 -->
        <div class="pyramid-tier tier-blue">
          <span class="tier-num">2</span>
          <span class="tier-name">Context 裁剪</span>
          <span class="tier-desc">CLAUDE.md 分层管理 + MCP Server 按需裁剪 + /compact 压缩 + 目录屏蔽</span>
          <span class="tier-save">-20~50%</span>
        </div>
        <!-- Tier 1 -->
        <div class="pyramid-tier tier-green">
          <span class="tier-num">1</span>
          <span class="tier-name">输出控制（5x 杠杆）</span>
          <span class="tier-desc">输出单价是输入 3~5 倍 &mdash;&mdash; &ldquo;简洁回答&rdquo;指令 + 只输出 diff + 不解释已知概念</span>
          <span class="tier-save">-30~60%</span>
        </div>
      </div>

      <div class="op-grid" style="margin-top:20px;">
        <div class="op-card cat-green">
          <h4>&#9312; 输出控制</h4>
          <p style="margin-bottom:8px;">输出成本是输入的 3~5 倍，控制输出量是最高杠杆。</p>
          <ul class="op-list">
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">CLAUDE.md 指令控制</span><br><span class="op-desc">&ldquo;回答简洁，先给结论&rdquo;&ldquo;代码修改只输出 diff&rdquo;&ldquo;不要解释已知概念&rdquo;</span></div>
            </li>
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">Prompt 级精确控制</span><br><span class="op-desc">&ldquo;只返回修改后的函数&rdquo;&ldquo;用 bullet points，不超过 5 条&rdquo;</span></div>
            </li>
            <li>
              <span class="freq-mid">&#9733;&#9733;</span>
              <div><span class="op-name">Edit &gt; Write</span><br><span class="op-desc">小改动用 Edit tool 而非 Write tool，避免输出完整文件</span></div>
            </li>
          </ul>
          <div class="savings-meter">
            <div class="meter-bar"><div class="meter-fill fill-green" style="width:50%;"></div></div>
            <span class="meter-label" style="color:var(--green);">-30~60%</span>
          </div>
        </div>

        <div class="op-card cat-blue">
          <h4>&#9313; Context 裁剪</h4>
          <p style="margin-bottom:8px;">减少每次请求携带的输入 Token。</p>
          <ul class="op-list">
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">MCP Server 裁剪</span><br><span class="op-desc">每个 MCP 注入工具描述到系统提示词，即使不调用也占 Token。按需启用</span></div>
            </li>
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">CLAUDE.md 分层</span><br><span class="op-desc">根级 &lt;50 行 + 模块级详尽，模型只加载当前目录链上的文件</span></div>
            </li>
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">/compact + 80% 规则</span><br><span class="op-desc">上下文占用超 80% 时压缩或新建会话，防止 Token 爆炸</span></div>
            </li>
            <li>
              <span class="freq-mid">&#9733;&#9733;</span>
              <div><span class="op-name">目录屏蔽</span><br><span class="op-desc">CLAUDE.md 中禁止扫描 node_modules / dist / .git / *.lock</span></div>
            </li>
          </ul>
          <div class="savings-meter">
            <div class="meter-bar"><div class="meter-fill fill-blue" style="width:40%;"></div></div>
            <span class="meter-label" style="color:var(--blue);">-20~50%</span>
          </div>
        </div>

        <div class="op-card cat-cyan">
          <h4>&#9314; 子 Agent 隔离</h4>
          <p style="margin-bottom:8px;">上下文天然隔离，主会话不膨胀。</p>
          <ul class="op-list">
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">主控编排 + 子 Agent 执行</span><br><span class="op-desc">子 Agent 只接收精确任务描述，不继承主会话历史 Token</span></div>
            </li>
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">精确描述一次到位</span><br><span class="op-desc">模糊描述多次重试消耗 3~5x Token，精确 prompt 是最佳投资</span></div>
            </li>
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">子 Agent 模型降级</span><br><span class="op-desc">通过 AGENTS.md / settings.json / env 将子 Agent 指定为 Haiku</span></div>
            </li>
          </ul>
          <div class="savings-meter">
            <div class="meter-bar"><div class="meter-fill fill-cyan" style="width:50%;"></div></div>
            <span class="meter-label" style="color:var(--cyan);">-30~60%</span>
          </div>
        </div>

        <div class="op-card cat-purple">
          <h4>&#9315; 模型路由级联</h4>
          <p style="margin-bottom:8px;">按任务复杂度选择模型，避免杀鸡用牛刀。</p>
          <ul class="op-list">
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">Haiku &rarr; Sonnet &rarr; Opus</span><br><span class="op-desc">搜索/格式化用 Haiku，日常编码用 Sonnet，架构设计才用 Opus</span></div>
            </li>
            <li>
              <span class="freq-mid">&#9733;&#9733;</span>
              <div><span class="op-name">跨厂商路由</span><br><span class="op-desc">OpenCode 支持多 provider：规划用 Gemini 长上下文，实现用 Claude Sonnet</span></div>
            </li>
            <li>
              <span class="freq-mid">&#9733;&#9733;</span>
              <div><span class="op-name">上下文先摘要</span><br><span class="op-desc">长文档先用小模型摘要再注入主上下文，节省 90% 输入 Token</span></div>
            </li>
          </ul>
          <div class="savings-meter">
            <div class="meter-bar"><div class="meter-fill fill-purple" style="width:60%;"></div></div>
            <span class="meter-label" style="color:var(--purple);">-40~70%</span>
          </div>
        </div>

        <div class="op-card cat-orange">
          <h4>&#9316; Prompt Caching</h4>
          <p style="margin-bottom:8px;">节省幅度最高的高级策略，自动触发。</p>
          <ul class="op-list">
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">系统提示词缓存</span><br><span class="op-desc">保持 CLAUDE.md + 系统提示词稳定 &rarr; 后续请求自动命中缓存，输入成本降至 0.1x</span></div>
            </li>
            <li>
              <span class="freq-high">&#9733;&#9733;&#9733;</span>
              <div><span class="op-name">长会话 &gt; 频繁新建</span><br><span class="op-desc">同一会话中缓存命中率持续提升，频繁新建会话会丢失缓存</span></div>
            </li>
            <li>
              <span class="freq-mid">&#9733;&#9733;</span>
              <div><span class="op-name">Batch API</span><br><span class="op-desc">非实时任务（测试生成/文档生成）用 Batch API，额外节省 50%</span></div>
            </li>
          </ul>
          <div class="savings-meter">
            <div class="meter-bar"><div class="meter-fill fill-orange" style="width:90%;"></div></div>
            <span class="meter-label" style="color:var(--orange);">-90%</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ── 区块 3: 跨工具实战配置 ── -->
  <div class="card">
    <div class="card-head">
      <h3>跨工具实战配置</h3>
      <span class="card-badge">CONFIG</span>
    </div>
    <div class="card-body">
      <p class="card-note">以下配置可直接复制使用，覆盖 Claude Code / OpenCode / Cursor / Gemini CLI 主流工具</p>

      <div class="cross-tool-tabs" id="configTabs">
        <button class="cross-tool-tab active" onclick="switchTab(event, 'tab-claude-md')">CLAUDE.md</button>
        <button class="cross-tool-tab" onclick="switchTab(event, 'tab-agents-md')">AGENTS.md</button>
        <button class="cross-tool-tab" onclick="switchTab(event, 'tab-opencode')">OpenCode</button>
        <button class="cross-tool-tab" onclick="switchTab(event, 'tab-cursor')">Cursor</button>
        <button class="cross-tool-tab" onclick="switchTab(event, 'tab-gemini')">Gemini CLI</button>
      </div>
      <div class="cross-tool-panels">
        <!-- Tab: CLAUDE.md -->
        <div class="cross-tool-panel active" id="tab-claude-md">
          <div class="spec-block" style="border:none;border-radius:0;margin:0;">
            <div class="spec-block-head">
              <span>CLAUDE.md 成本优化模板（适用 Claude Code / OpenCode）</span>
              <span class="spec-lang">MARKDOWN</span>
            </div>
            <pre><span class="comment"># CLAUDE.md — 成本优化版</span>

<span class="key">## Response Rules（输出控制 — 省 3~5x 输出成本）</span>
<span class="str">- 回答简洁，先给结论</span>
<span class="str">- 代码修改只输出 diff，不要输出完整文件</span>
<span class="str">- 不要添加不必要的注释和文档字符串</span>
<span class="str">- 不要解释已知概念</span>
<span class="str">- 如果只改 1-2 行，用 Edit tool 而不是 Write tool</span>

<span class="key">## Model Preferences（模型路由）</span>
<span class="str">- 日常编码: Sonnet（默认）</span>
<span class="str">- 架构设计/复杂重构: Opus</span>
<span class="str">- 搜索/格式化/子 Agent: Haiku</span>

<span class="key">## Ignore（Context 裁剪 — 减少输入 Token）</span>
<span class="str">- node_modules/, dist/, build/, .git/</span>
<span class="str">- *.lock, *.map, *.min.js, *.min.css</span>
<span class="str">- coverage/, .next/, .nuxt/</span>

<span class="key">## Caching 提示</span>
<span class="comment"># 此文件内容保持稳定 → 自动触发 Prompt Cache</span>
<span class="comment"># 频繁改动会导致缓存失效，增加成本</span></pre>
          </div>
        </div>

        <!-- Tab: AGENTS.md -->
        <div class="cross-tool-panel" id="tab-agents-md">
          <div class="spec-block" style="border:none;border-radius:0;margin:0;">
            <div class="spec-block-head">
              <span>AGENTS.md 降本定义（适用 Claude Code / OpenCode 子 Agent）</span>
              <span class="spec-lang">YAML</span>
            </div>
            <pre><span class="comment"># .claude/agents/code-searcher.md</span>
<span class="comment"># 关键降本字段：model + tools（最小化工具注入）</span>

<span class="key">---</span>
<span class="key">name:</span> <span class="str">code-searcher</span>
<span class="key">model:</span> <span class="str">haiku</span>                  <span class="comment"># 明确指定最便宜的模型</span>
<span class="key">tools:</span> <span class="str">[Read, Glob, Grep]</span>      <span class="comment"># 最小工具集，减少系统提示注入</span>
<span class="key">description:</span> <span class="str">"搜索代码库中的特定模式和定义"</span>
<span class="key">---</span>

搜索指定的代码模式，返回文件路径和行号。
不要解释代码含义，只返回搜索结果。

<span class="comment"># .claude/agents/test-runner.md</span>

<span class="key">---</span>
<span class="key">name:</span> <span class="str">test-runner</span>
<span class="key">model:</span> <span class="str">haiku</span>                  <span class="comment"># 运行测试不需要大模型</span>
<span class="key">tools:</span> <span class="str">[Bash, Read]</span>           <span class="comment"># 只需执行命令和读文件</span>
<span class="key">description:</span> <span class="str">"运行测试并报告结果"</span>
<span class="key">---</span>

执行测试命令，只返回通过/失败的摘要。

<span class="comment"># 降本原理：</span>
<span class="comment"># 1. model: haiku → 单价是 Opus 的 1/20</span>
<span class="comment"># 2. tools 最小化 → 减少系统提示词中的工具描述注入</span>
<span class="comment"># 3. 精确 description → 避免歧义导致的重试</span></pre>
          </div>
        </div>

        <!-- Tab: OpenCode -->
        <div class="cross-tool-panel" id="tab-opencode">
          <div class="spec-block" style="border:none;border-radius:0;margin:0;">
            <div class="spec-block-head">
              <span>OpenCode 多模型路由配置</span>
              <span class="spec-lang">TOML</span>
            </div>
            <pre><span class="comment"># ~/.config/opencode/config.toml</span>

<span class="key">[providers.anthropic]</span>
<span class="str">api_key</span> = <span class="str">"sk-ant-..."</span>

<span class="key">[providers.google]</span>
<span class="str">api_key</span> = <span class="str">"AIza..."</span>

<span class="comment"># 默认模型：日常编码用 Sonnet（性价比最优）</span>
<span class="key">[models.default]</span>
<span class="str">provider</span> = <span class="str">"anthropic"</span>
<span class="str">model</span> = <span class="str">"claude-sonnet-4-20250514"</span>

<span class="comment"># 规划模型：用 Gemini 长上下文做架构分析</span>
<span class="key">[models.architect]</span>
<span class="str">provider</span> = <span class="str">"google"</span>
<span class="str">model</span> = <span class="str">"gemini-2.5-pro"</span>

<span class="comment"># 降本策略：</span>
<span class="comment"># - 默认 Sonnet → $3/$15 (vs Opus $15/$75)</span>
<span class="comment"># - 规划用 Gemini → 1M 上下文免拼接</span>
<span class="comment"># - 搜索子 Agent 可降级 Haiku</span></pre>
          </div>
        </div>

        <!-- Tab: Cursor -->
        <div class="cross-tool-panel" id="tab-cursor">
          <div class="spec-block" style="border:none;border-radius:0;margin:0;">
            <div class="spec-block-head">
              <span>Cursor 成本控制策略</span>
              <span class="spec-lang">STRATEGY</span>
            </div>
            <pre><span class="key">## Cursor 成本优化（Pro $20/月 快速请求额度管理）</span>

<span class="comment"># 1. 模型选择策略</span>
<span class="str">Tab 补全</span>       → 不消耗快速请求，随便用
<span class="str">Cmd+K（Edit）</span>  → 消耗快速请求，精确描述一次到位
<span class="str">Composer</span>       → 消耗最多请求，仅用于多文件变更

<span class="comment"># 2. 模型切换省额度</span>
<span class="str">默认 claude-sonnet-4</span>   → 快速请求性价比最优
<span class="str">切换 gpt-4.1-mini</span>     → 简单任务省快速请求额度
<span class="str">仅复杂任务 claude-opus</span> → 架构设计才启用

<span class="comment"># 3. .cursorrules 输出控制</span>
<span class="value">- 回答简洁，不要重复问题</span>
<span class="value">- 只修改需要改的代码，不要输出完整文件</span>
<span class="value">- 不要添加不必要的导入和类型注解</span>

<span class="comment"># 4. 额度不够时的备选方案</span>
<span class="str">快速请求用完 → 切换慢速请求（免费但排队）</span>
<span class="str">或切换 Claude Code / OpenCode 继续工作</span></pre>
          </div>
        </div>

        <!-- Tab: Gemini CLI -->
        <div class="cross-tool-panel" id="tab-gemini">
          <div class="spec-block" style="border:none;border-radius:0;margin:0;">
            <div class="spec-block-head">
              <span>Gemini CLI 免费额度利用</span>
              <span class="spec-lang">BASH</span>
            </div>
            <pre><span class="comment"># Gemini CLI 免费额度策略</span>

<span class="comment"># 1. 免费额度范围（Google AI Studio）</span>
<span class="str">Gemini 2.5 Flash</span>: <span class="value">免费（RPM/RPD 有限制）</span>
<span class="str">Gemini 2.5 Pro</span>:   <span class="value">免费额度有限，超量按量计费</span>

<span class="comment"># 2. 混用策略：Claude Code + Gemini CLI</span>
<span class="keyword">export</span> <span class="key">GEMINI_API_KEY</span>=<span class="str">"AIza..."</span>

<span class="comment"># 高价值任务 → Claude Code（精准但贵）</span>
<span class="str">claude "重构 auth 模块的错误处理"</span>

<span class="comment"># 探索性任务 → Gemini CLI（免费额度）</span>
<span class="str">gemini "分析这个项目的架构，列出改进建议"</span>

<span class="comment"># 3. 注意事项</span>
<span class="comment"># - 免费额度有 RPD (Requests Per Day) 限制</span>
<span class="comment"># - 高峰期可能触发限流</span>
<span class="comment"># - 适合探索/规划/Review，不适合高频批量任务</span>
<span class="comment"># - Gemini CLI 支持读取 GEMINI.md 作为上下文文件</span></pre>
          </div>
        </div>
      </div>

      <div class="tip-callout" style="margin-top:16px;">
        <span class="tip-icon">&#10003;</span>
        <span><strong>验证方法</strong>：配置修改后，用 <code style="background:rgba(74,158,255,0.08);padding:1px 5px;border-radius:3px;color:var(--cyan);font-family:'JetBrains Mono',monospace;font-size:0.72rem;">npx ccusage@latest</code> 对比优化前后的 Token 消耗量。OpenCode 用户查看内置成本面板。Cursor 用户在设置中查看快速请求余额。</span>
      </div>
    </div>
  </div>

  <!-- ── 区块 4: Prompt Caching 深度解析 ── -->
  <div class="card">
    <div class="card-head">
      <h3>Prompt Caching 深度解析</h3>
      <span class="card-badge">CACHING</span>
    </div>
    <div class="card-body">
      <p class="card-note">当前内容中被低估的最高节省策略 &mdash;&mdash; 成熟会话中可节省 90% 输入成本</p>

      <div class="spec-block">
        <div class="spec-block-head">
          <span>Prompt Caching 工作机制</span>
          <span class="spec-lang">MECHANISM</span>
        </div>
        <pre><span class="key">请求结构（简化）：</span>

<span class="comment">┌──────────────────────────────────────────┐</span>
<span class="comment">│</span> <span class="str">System Prompt</span>    <span class="comment">← 稳定部分，自动缓存      │</span>
<span class="comment">│</span> <span class="str">CLAUDE.md 内容</span>   <span class="comment">← 稳定部分，自动缓存      │</span>
<span class="comment">│</span> <span class="str">MCP 工具描述</span>     <span class="comment">← 稳定部分，自动缓存      │</span>
<span class="comment">├──────────────────────────────────────────┤</span>
<span class="comment">│</span> <span class="value">对话历史</span>         <span class="comment">← 增量部分，每次新增       │</span>
<span class="comment">│</span> <span class="value">当前用户消息</span>     <span class="comment">← 变化部分，不缓存         │</span>
<span class="comment">└──────────────────────────────────────────┘</span>

<span class="key">成本计算（以 Claude Sonnet 4 为例）：</span>
  首次请求: 系统提示 10K tokens × <span class="num">$3/1M</span> = <span class="hl">$0.03</span>
  后续请求: 缓存命中 10K tokens × <span class="num">$0.30/1M</span> = <span class="value">$0.003</span>  <span class="comment">← 节省 90%</span>

<span class="key">触发条件：</span>
  <span class="str">1. 前缀匹配</span> — 请求开头的 token 序列必须与缓存完全一致
  <span class="str">2. 最小长度</span> — 缓存内容 &ge; 1024 tokens（Sonnet/Opus）
  <span class="str">3. 5 分钟 TTL</span> — 缓存有效期 5 分钟，频繁使用自动续期</pre>
      </div>

      <h4 style="font-size:0.84rem;margin:16px 0 10px;color:var(--text);">最大化缓存命中率</h4>
      <div class="op-grid">
        <div class="op-card cat-green">
          <h4 style="color:var(--green);">&#10003; 应该做</h4>
          <ul class="op-list">
            <li><div><span class="op-name">保持 CLAUDE.md 稳定</span><br><span class="op-desc">不要频繁修改，每次改动都会导致缓存失效</span></div></li>
            <li><div><span class="op-name">系统提示放前面</span><br><span class="op-desc">稳定内容放请求开头，变化内容放后面</span></div></li>
            <li><div><span class="op-name">长会话优于频繁新建</span><br><span class="op-desc">同一会话中缓存命中率持续提升</span></div></li>
            <li><div><span class="op-name">MCP 配置保持固定</span><br><span class="op-desc">MCP 工具描述也参与缓存，变动会失效</span></div></li>
          </ul>
        </div>
        <div class="op-card cat-orange">
          <h4 style="color:var(--orange);">&#10007; 避免做</h4>
          <ul class="op-list">
            <li><div><span class="op-name">频繁改 CLAUDE.md</span><br><span class="op-desc">每次改动 = 缓存失效 = 全价重新计算</span></div></li>
            <li><div><span class="op-name">每次任务新建会话</span><br><span class="op-desc">新会话无缓存积累，首次请求全价</span></div></li>
            <li><div><span class="op-name">动态切换 MCP 配置</span><br><span class="op-desc">MCP 工具集变化导致系统提示前缀变化</span></div></li>
            <li><div><span class="op-name">忽略 5 分钟 TTL</span><br><span class="op-desc">长时间不操作后缓存过期，需重新加载</span></div></li>
          </ul>
        </div>
      </div>

      <div class="tip-callout" style="margin-top:16px;">
        <span class="tip-icon">&#9432;</span>
        <span><strong>Batch API 额外省 50%</strong>：非实时任务（批量测试生成、文档翻译、代码审查报告）可使用 Anthropic Batch API，在标准价格基础上再打 5 折。适用于 CI/CD 流水线和离线批处理场景。</span>
      </div>
    </div>
  </div>

  <!-- ── 区块 5: 成本监控与实际基准 ── -->
  <div class="card">
    <div class="card-head">
      <h3>成本监控与实际基准</h3>
      <span class="card-badge">MONITOR</span>
    </div>
    <div class="card-body">
      <h4 style="font-size:0.84rem;margin-bottom:12px;color:var(--text);">ccusage &mdash;&mdash; Claude Code 成本监控工具</h4>
      <div class="monitor-block">
        <div class="monitor-head">
          <span class="monitor-dot red"></span>
          <span class="monitor-dot yellow"></span>
          <span class="monitor-dot green"></span>
          <span class="monitor-title">Terminal &mdash; ccusage</span>
        </div>
        <pre><span class="cmd">$ npx ccusage@latest</span>

<span class="dim">  Period: 2025-01-01 ~ 2025-01-31</span>
<span class="dim">  ─────────────────────────────────────────────</span>
  <span class="path">Total Cost:</span>        <span class="hl">$142.58</span>
  <span class="path">Input Tokens:</span>      <span class="val">45.2M</span>  <span class="dim">(incl. cache read 28.1M)</span>
  <span class="path">Output Tokens:</span>     <span class="val">8.7M</span>
  <span class="path">Cache Read:</span>        <span class="val">28.1M</span>  <span class="dim">(62% of input — 缓存命中良好)</span>
  <span class="path">Cache Creation:</span>    <span class="val">3.2M</span>
<span class="dim">  ─────────────────────────────────────────────</span>

<span class="cmd">$ npx ccusage@latest daily</span>          <span class="dim"># 按日分解</span>
<span class="cmd">$ npx ccusage@latest session</span>        <span class="dim"># 按会话分解</span>
<span class="cmd">$ npx ccusage@latest blocks --live</span>  <span class="dim"># 实时监控</span></pre>
      </div>

      <h4 style="font-size:0.84rem;margin:20px 0 12px;color:var(--text);">真实成本基准表</h4>
      <div style="overflow-x:auto;">
        <table class="compare-table">
          <thead>
            <tr>
              <th>使用强度</th>
              <th>场景</th>
              <th>推荐方案</th>
              <th>月成本</th>
              <th>优化后</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>&#128994; 轻度</td>
              <td>偶尔补全 / 问答</td>
              <td>Copilot Free / Gemini Free</td>
              <td>$0</td>
              <td class="highlight">$0</td>
            </tr>
            <tr>
              <td>&#128309; 日常</td>
              <td>每天 1-2h 编码</td>
              <td>Claude Pro $20 / Cursor $20</td>
              <td>$20</td>
              <td class="dim">$20（额度延长 2-3x）</td>
            </tr>
            <tr>
              <td>&#128992; 专业</td>
              <td>每天 4-6h 开发</td>
              <td>Claude Max $100</td>
              <td>$100</td>
              <td class="dim">$100（额度延长 2x）</td>
            </tr>
            <tr>
              <td>&#128308; 重度</td>
              <td>全天 8h+ 开发</td>
              <td>Claude Max $200 / API</td>
              <td>$200-500</td>
              <td class="highlight">$60-200（-60~70%）</td>
            </tr>
            <tr>
              <td>&#128995; 团队</td>
              <td>多人协作 / CI</td>
              <td>API + Batch</td>
              <td>$500-2000</td>
              <td class="highlight">$150-600（-70%）</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h4 style="font-size:0.84rem;margin:20px 0 10px;color:var(--text);">优化前后对比案例</h4>
      <div class="op-grid">
        <div class="op-card cat-orange">
          <h4 style="color:var(--orange);">优化前（典型问题用法）</h4>
          <ul class="op-list">
            <li><div><span class="op-name">865M tokens/月</span><br><span class="op-desc">频繁 @Codebase 全扫、每次新建会话、未裁剪 MCP</span></div></li>
            <li><div><span class="op-name">月费 $2,595</span><br><span class="op-desc">全部使用 Opus，无输出控制指令</span></div></li>
            <li><div><span class="op-name">缓存命中率 &lt;10%</span><br><span class="op-desc">频繁改 CLAUDE.md + 每次新建会话</span></div></li>
          </ul>
        </div>
        <div class="op-card cat-green">
          <h4 style="color:var(--green);">优化后（五维度策略）</h4>
          <ul class="op-list">
            <li><div><span class="op-name">187M tokens/月</span><br><span class="op-desc">按需检索、长会话复用、MCP 精简到 3-5 个</span></div></li>
            <li><div><span class="op-name">月费 $98</span><br><span class="op-desc">Haiku 搜索 + Sonnet 编码 + 简洁输出指令</span></div></li>
            <li><div><span class="op-name">缓存命中率 &gt;60%</span><br><span class="op-desc">CLAUDE.md 稳定 + 长会话 + MCP 固定</span></div></li>
          </ul>
        </div>
      </div>

      <div class="tip-callout tip-warn" style="margin-top:12px;">
        <span class="tip-icon">&#9888;</span>
        <span>以上数据基于社区开发者真实分享，个人实际费用因使用习惯差异较大。建议用 <code style="background:rgba(74,158,255,0.08);padding:1px 5px;border-radius:3px;color:var(--cyan);font-family:'JetBrains Mono',monospace;font-size:0.72rem;">ccusage</code> 建立自己的基线数据后再制定优化目标。</span>
      </div>
    </div>
  </div>

  <!-- ── 区块 6: 选型决策树 + Insight ── -->
  <div class="card">
    <div class="card-head">
      <h3>选型决策树</h3>
      <span class="card-badge">DECISION</span>
    </div>
    <div class="card-body">
      <div class="mermaid">
flowchart TD
    A["需求类型"] --> B{"是否交互式开发？"}
    B -->|是| C{"每天使用时长？"}
    B -->|否| G["CI/CD / 批处理"]
    C -->|"&lt;2h"| D["Claude Pro $20<br/>Cursor Pro $20<br/>Copilot $10-19"]
    C -->|"2-6h"| E["Claude Max $100<br/>+ 五维度优化延长额度"]
    C -->|"&gt;6h"| F["Claude Max $200<br/>或 API + BYOK"]
    G --> H["API + Batch API<br/>比订阅省 50%+"]
    F --> I{"成本敏感？"}
    I -->|是| J["OpenCode + API<br/>+ Gemini Free 混用<br/>$60-150/月"]
    I -->|否| K["Claude Max $200<br/>+ 优化延长 2x 额度"]

    style A fill:#0f1628,stroke:#4a9eff,color:#dce4f0
    style B fill:#0f1628,stroke:#22d3ee,color:#dce4f0
    style C fill:#0f1628,stroke:#22d3ee,color:#dce4f0
    style D fill:#0f1628,stroke:#34d399,color:#dce4f0
    style E fill:#0f1628,stroke:#34d399,color:#dce4f0
    style F fill:#0f1628,stroke:#fbbf24,color:#dce4f0
    style G fill:#0f1628,stroke:#a78bfa,color:#dce4f0
    style H fill:#0f1628,stroke:#a78bfa,color:#dce4f0
    style I fill:#0f1628,stroke:#22d3ee,color:#dce4f0
    style J fill:#0f1628,stroke:#34d399,color:#dce4f0
    style K fill:#0f1628,stroke:#fbbf24,color:#dce4f0
      </div>
    </div>
  </div>

  <div class="insight">
    <h4>成本优化的 80/20 法则</h4>
    <p>80% 的成本浪费来自三个源头：<strong style="color:var(--orange);">未控制的输出</strong>（输出单价是输入 3~5 倍，一句&ldquo;简洁回答&rdquo;就能省一半）；<strong style="color:var(--cyan);">未裁剪的系统提示</strong>（MCP 工具描述 + 膨胀的 CLAUDE.md 每次请求都重复携带）；<strong style="color:var(--purple);">未利用的缓存</strong>（频繁新建会话和改动 CLAUDE.md 导致缓存持续失效）。</p>
    <p style="margin-top:10px;">三步优先行动：<strong>1.</strong> CLAUDE.md 加&ldquo;简洁回答&rdquo;指令 &rarr; <strong>2.</strong> 裁剪闲置 MCP + 目录屏蔽 &rarr; <strong>3.</strong> 子 Agent 降级 Haiku + 保持长会话。仅这三步即可覆盖大部分优化收益。API 用户额外叠加 Prompt Caching + Batch API 可再省 50-90%。</p>
  </div>
</div>

<!-- ========== SECTION 04: 从单文件到全项目的渐进式实践 ========== -->
<div class="section">
  <div class="section-head">
    <span class="sn">04</span>
    <span class="st">从单文件到全项目的渐进式实践</span>
  </div>
  <p class="sd">不要试图一步到位。从最简单的单文件操作开始，逐步扩展到多 Agent 协作和全自动工作流。</p>

  <div class="card">
    <div class="card-head">
      <h3>渐进式实践路线图</h3>
      <span class="card-badge">ROADMAP</span>
    </div>
    <div class="card-body">
      <div class="mermaid">
flowchart TD
    L1["Level 1: 单文件操作&lt;br/&gt;补全 · 重构 · Bug 修复"] --> L2["Level 2: 模块级开发&lt;br/&gt;功能模块 · 测试编写"]
    L2 --> L3["Level 3: 项目级编排&lt;br/&gt;多文件变更 · PR 生成"]
    L3 --> L4["Level 4: 多 Agent 协作&lt;br/&gt;并行开发 · 交叉审查"]
    L4 --> L5["Level 5: 全自动工作流&lt;br/&gt;CI/CD 集成 · 自主修复"]
      </div>
    </div>
  </div>

  <div class="op-grid">
    <div class="op-card cat-blue">
      <h4>Level 1 &middot; 单文件</h4>
      <ul class="op-list">
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">代码补全</span><br><span class="op-desc">使用 AI 补全函数实现</span></div>
        </li>
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">重构</span><br><span class="op-desc">让 AI 优化现有代码</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">Bug 修复</span><br><span class="op-desc">描述 bug，AI 定位并修复</span></div>
        </li>
        <li>
          <span class="freq-low">&#9733;</span>
          <div><span class="op-name">文档</span><br><span class="op-desc">AI 生成 JSDoc / 注释</span></div>
        </li>
      </ul>
    </div>
    <div class="op-card cat-purple">
      <h4>Level 2 &middot; 模块级</h4>
      <ul class="op-list">
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">功能模块</span><br><span class="op-desc">描述功能需求，AI 生成完整模块</span></div>
        </li>
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">测试编写</span><br><span class="op-desc">AI 生成单元测试</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">API 端点</span><br><span class="op-desc">从 Schema 生成 CRUD</span></div>
        </li>
      </ul>
    </div>
    <div class="op-card cat-green">
      <h4>Level 3 &middot; 项目级</h4>
      <ul class="op-list">
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">多文件变更</span><br><span class="op-desc">一次 prompt 修改多个文件</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">PR 生成</span><br><span class="op-desc">AI 自动提交 PR</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">架构迁移</span><br><span class="op-desc">AI 辅助技术栈迁移</span></div>
        </li>
      </ul>
    </div>
    <div class="op-card cat-orange">
      <h4>Level 4 &middot; 多 Agent</h4>
      <ul class="op-list">
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">并行开发</span><br><span class="op-desc">多子 Agent 同时开发不同模块</span></div>
        </li>
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">交叉审查</span><br><span class="op-desc">不同模型互相审查</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">任务分解</span><br><span class="op-desc">自动拆解大任务</span></div>
        </li>
      </ul>
    </div>
    <div class="op-card cat-cyan">
      <h4>Level 5 &middot; 全自动</h4>
      <ul class="op-list">
        <li>
          <span class="freq-high">&#9733;&#9733;&#9733;</span>
          <div><span class="op-name">CI/CD 集成</span><br><span class="op-desc">GitHub Actions + AI 自动修复</span></div>
        </li>
        <li>
          <span class="freq-mid">&#9733;&#9733;</span>
          <div><span class="op-name">监控响应</span><br><span class="op-desc">AI 自动响应错误报警</span></div>
        </li>
        <li>
          <span class="freq-low">&#9733;</span>
          <div><span class="op-name">自主运维</span><br><span class="op-desc">自动化部署和回滚</span></div>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- ========== 结尾 Insight ========== -->
<div class="section">
  <div class="insight">
    <h4>持续进化</h4>
    <p>AI CLI 工具的能力在快速迭代。今天的最佳实践可能半年后就会被更好的方法取代。保持学习和实验的心态，关注工具更新日志，参与社区讨论，不断优化你的 AI 辅助工作流。记住：AI 是工具，工程判断力才是不可替代的核心能力。</p>
  </div>
</div>

<!-- ========== BOTTOM NAV ========== -->
<div class="bottom-nav">
  <a href="index.html" class="bottom-nav-card">
    <div class="nav-dir">&#127968; 返回主页</div>
    <h4>AI CLI 工具分享</h4>
    <p>回到教程目录，浏览全部章节</p>
  </a>
</div>

</div>

<!-- ========== FOOTER ========== -->
<div class="footer">
  AI CLI TOOLS TUTORIAL &middot; CHAPTER 07 &middot; 2026 &middot; <a href="index.html">返回主页</a>
</div>

<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark',
    securityLevel: 'loose',
    flowchart: { useMaxWidth: true, htmlLabels: true, curve: 'basis' },
    sequence: { useMaxWidth: true, mirrorActors: false }
  });
</script>
<script>
  function switchTab(event, tabId) {
    var tabs = document.querySelectorAll('.cross-tool-tab');
    var panels = document.querySelectorAll('.cross-tool-panel');
    tabs.forEach(function(t) { t.classList.remove('active'); });
    panels.forEach(function(p) { p.classList.remove('active'); });
    event.currentTarget.classList.add('active');
    document.getElementById(tabId).classList.add('active');
  }
</script>
</body>
</html>
